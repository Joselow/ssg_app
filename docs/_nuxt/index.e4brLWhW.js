import{d as $,p as T,r as x,k as z,j as E,c as l,a as p,e as m,m as y,l as s,b as e,q as v,v as k,F as C,s as H,o as _,w as A}from"./entry.3Ar7j7YJ.js";import{_ as L}from"./nuxt-link.1xxMxq_y.js";import{u as S,b as B,_ as M}from"./asyncData.buWUBR6I.js";import{u as V}from"./useCart.0PuRbd50.js";const j=$({name:"Head",inheritAttrs:!1,setup:(i,o)=>()=>{var n,t;return(t=(n=o.slots).default)==null?void 0:t.call(n)}}),F=async()=>await $fetch("https://fakestoreapi.com/products");function q(){const i=T();return{getProductss:async()=>await S("products",()=>F(),{lazy:!0,transform(t){return{products:[...t],fetchedAt:new Date}},getCachedData(t){const r=i.payload.data[t]||i.static.data[t];if(!r)return;const u=10*1e3;if(!(r.fetchedAt.getTime()+u<=new Date))return r}})}}const I={class:"m-6"},G={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6"},J={class:"flex justify-center"},K=["onClick"],Y={__name:"index",async setup(i){let o,n;const t=x("Products"),r=x("My amazing site. uwuwu");z({title:t,meta:[{name:"description",content:r}],bodyAttrs:{class:"test"}}),B({ogTitle:"My Amazing Site",ogDescription:"This is my amazing site, let me tell you all about it.",ogImage:"https://example.com/image.png"});const{getProductss:u}=q(),{data:g,pending:d,error:O,status:b,refresh:f}=([o,n]=E(()=>u()),o=await o,n(),o);T().hook("vue:error",(h,c,w)=>{console.log("---------------------- Error",h.message)});const{addToCart:D}=V();return(h,c)=>{const w=j,P=L,N=M;return _(),l(C,null,[p(w),m(" "+y(s(b))+" ",1),e("button",{onClick:c[0]||(c[0]=(...a)=>s(f)&&s(f)(...a))},"new fetch"),e("div",I,[e("h1",null,[m(y(s(t))+" ",1),e("button",{onClick:c[1]||(c[1]=a=>t.value="owo")},"change title to owo")])]),v(e("div",null," Loading ... ",512),[[k,s(d)]]),v(e("div",null,[e("ul",G,[(_(!0),l(C,null,H(s(g).products,a=>(_(),l("li",null,[p(N,{product:a},{"link-detail":A(()=>[e("div",null,[p(P,{to:`/products/${a.id}`},{default:A(()=>[m(" ➡️ ")]),_:2},1032,["to"])])]),_:2},1032,["product"]),e("div",J,[e("button",{onClick:Q=>s(D)({product:a})},"➕ Add",8,K)])]))),256))])],512),[[k,!s(d)]])],64)}}};export{Y as default};
